<ion-view view-title="Perfil producto"> <!-- view-title: Es el titulo que se muestra en la pestaÃ±a del navegador-->

	<ion-content class="padding">

	<form name="formPerfilProducto">
		<div id="fondoImgPerfil">
			<!-- <img ng-show="data.urlFoto !== null" ng-src="{{data.urlFoto}}" alt="{{data.nombre}} {{data.apellido1}}"> -->
			<img ng-show="imgURItemp !== undefined" ng-src="{{imgURItemp}}" alt="{{data.nombre}} {{data.apellido1}}" ng-click="verFoto()">
			<img ng-show="imgURItemp === undefined" ng-src="{{ data.urlFoto || './img/noFoto.png' }}" alt="{{data.nombre}} {{data.apellido1}}" ng-click="verFoto()">
			<button id="btnHacerFoto" class="button icon button-positive icon ion-camera" ng-click="openPopoverFoto($event)"></button>
		</div>
		<div class="item item-divider">Datos producto</div>
			<div class="list">

				<label class="item item-input">
						<span class="input-label"><b>Proveedor:</b></span>
						<input type="text" name="nombreProveedor" ng-model="datosProducto.nombreProveedor" ng-disabled="nombreProveedor.$invalid = true">
				</label>

				<label class="item item-input">
						<span class="input-label"><b>Marca:</b></span>
						<input type="text" name="nombreMarca" ng-model="datosProducto.nombreMarca" ng-disabled="nombreMarca.$invalid = true">
				</label>

				<label class="item item-input">
						<span class="input-label"><b>Nombre producto:</b></span>
						<input type="text" name="nombreProducto" ng-model="datosProducto.nombreProducto" ng-disabled="nombreProducto.$invalid = true">
				</label>

				<label class="item item-input">
						<span class="input-label"><b>Unides stock:</b></span>
						<input type="text" name="unidades" ng-model="datosProducto.unidades" ng-disabled="unidades.$invalid = true">
				</label>

				<div class="item item-input-inset" ng-class="{ 'errorCampoForm' : formPerfilProducto.precioVentaUnd.$invalid && visitedPrevioVenta}">
					 <label class="item-input-wrapper item-input item-stacked-label" style="background-color: white;">
							<span class="input-label"><b>VentaPrecio/Und:</b><span class="asteriscoObligatorio">*</span></span>
							<input type="number" name="precioVentaUnd" ng-model="datosProducto.precioVentaUnd" ng-blur="visitedPrevioVenta = true" ng-pattern="/^[0-9]+(\.[0-9]{1,2})?$/" required>
					</label>

				    <button class="button button-small button-positive icon ion-edit" type="button" ng-disabled="formPerfilProducto.$invalid" ng-click="clickModificarPrecioVenta(datosProducto.precioVentaUnd)"> Guardar cambios</button>
 			 	</div>
		 		<div ng-show="formPerfilProducto.precioVentaUnd.$invalid && visitedPrevioVenta">
					<span class="errorMensajeForm" ng-show="formPerfilProducto.precioVentaUnd.$error.required">Campo obligatorio.</span>
					<span class="errorMensajeForm" ng-show="formPerfilProducto.precioVentaUnd.$error.pattern">No se admiten numeros negativos y solo dos decimales.</span>
    			</div>

			  	<div class="item item-divider">Datos compra</div>
				<ion-list>
					<ion-item ng-repeat = "itemProducto in productosCompra" for={{itemProducto}}>
						<div class="row responsive-sm">
							<div class="col-5">
								 <label class="numeracionServCliente">{{$index+1}}.</label>
							</div>

							  <div class="col">
							  	<label class="item item-input">
									<span class="input-label">Unidades:</span>
									<input type="text" name="cantidad" ng-model="itemProducto.cantidad" ng-disabled="cantidad.$invalid = true">
								</label>
							  </div>

							  	<div class="col">
							  	<label class="item item-input">
									<span class="input-label">Precio compra:</span>
									<input type="text" name="precioCompra" ng-model="itemProducto.precioCompra" ng-disabled="precioCompra.$invalid = true">
								</label>
								</div>

							  <div class="col">
							  	<label class="item item-input">
									<span class="input-label">Fecha de compra:</span>
									<input type="date" name="fechaCompra" ng-model="itemProducto.fechaCompra" ng-disabled="fechaCompra.$invalid = true">
								</label>
							  </div>
						</div> <!-- FIN ROW -->
					</ion-item>

				</ion-list>

				<div class="item item-divider">Datos venta</div>  	

				<ion-list>
					<ion-item ng-repeat = "itemProducto in productosVenta" for={{itemProducto}}>
						<div class="row responsive-sm">
							<div class="col-5">
								 <label class="numeracionServCliente">{{$index+1}}.</label>
							</div>

							  <div class="col">
							  	<label class="item item-input">
									<span class="input-label">Unidades:</span>
									<input type="text" name="cantidad" ng-model="itemProducto.cantidad" ng-disabled="cantidad.$invalid = true">
								</label>
							  </div>

							  	<div class="col">
							  	<label class="item item-input">
									<span class="input-label">Precio venta:</span>
									<input type="text" name="precioVenta" ng-model="itemProducto.precioVenta" ng-disabled="precioVenta.$invalid = true">
								</label>
								</div>

							  <div class="col">
							  	<label class="item item-input">
									<span class="input-label">Fecha de venta:</span>
									<input type="date" name="fechaVenta" ng-model="itemProducto.fechaVenta" ng-disabled="fechaVenta.$invalid = true">
								</label>
							  </div>
						</div> <!-- FIN ROW -->
					</ion-item>
				</ion-list>

				<div class="row  responsive-sm">
				  	<div class="col">
				  		<button class="button button-block button-assertive icon ion-trash-b" type="button" ng-click="clickEliminarProducto()"> Borrar producto</button>
					</div>
				</div>
		</form>
	</ion-content>
</ion-view>